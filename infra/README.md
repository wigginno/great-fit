# Great Fit Infrastructure

This directory contains the **AWS CDK v2** stack that provisions the VPC, PostgreSQL (Aurora Serverless v2) database and Secrets Manager secret used by the production deployment.

---

## Quick start

```bash
cd infra
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
npm install -g aws-cdk@latest

# bootstrap (once per account/region)
cdk bootstrap

# deploy stack
cdk deploy
```

### Stack components
| Resource | Notes |
|----------|-------|
| **VPC** | 2 AZs, public + isolated subnets |
| **RDS** | Aurora PostgreSQL Serverless v2 (0.5–2 ACU) |
| **Secrets Manager** | Autogenerated master password `gfadmin` |

Outputs:
* `DbEndpoint` – hostname of primary cluster endpoint
* `DbSecretArn` – ARN of the secret containing `{username,password,host,port,dbname}`

Construct a `DATABASE_URL` like:
```bash
postgresql://gfadmin:<password>@<DbEndpoint>:5432/greatfit
```
and inject it into your container/task definition.